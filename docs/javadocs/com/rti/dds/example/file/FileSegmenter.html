<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_10) on Fri Nov 03 17:36:22 EST 2006 -->
<TITLE>
FileSegmenter
</TITLE>

<META NAME="keywords" CONTENT="com.rti.dds.example.file.FileSegmenter class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="FileSegmenter";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/FileSegmenter.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../com/rti/dds/example/file/FileReconstructor.html" title="class in com.rti.dds.example.file"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.FileSegmenterFilenameFilter.html" title="class in com.rti.dds.example.file"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="FileSegmenter.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.rti.dds.example.file</FONT>
<BR>
Class FileSegmenter</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by">java.lang.Thread
      <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by"><B>com.rti.dds.example.file.FileSegmenter</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>java.lang.Runnable</DD>
</DL>
<HR>
<DL>
<DT>public class <B>FileSegmenter</B><DT>extends java.lang.Thread</DL>

<P>
This class finds files to be send over DDS and prepares messages to represent
 those files. Since a particular file may contain more bytes than can be 
 represented in a single message, the primary function of this class is to 
 produce a message set appropriate for each file. The messages produced are
 put in a blocking queue, which is in turn read by FileSegmentWriteThread.
 <p>
 This class is also responsible for searching the base directory for files to
 send.  Two structures are used for this.  The first is a set of all found
 files.  As findAllFiles() scans the directory hierarchy, files are added
 to this set; elements are never removed.  The second structure is a queue
 of files to be sent.  Files are pushed onto this queue for three reasons:
 1.) Newly found files are added to this queue; 2.) Files are requeued if
 there was a processing error on the previous attempt; 3.) Modified files
 are requeued if enabled (See FileSegmentPublisher command-line options).
 <p>
 While running, we call getFileToSend() to pop a file from queuedFiles.  If
 queuedFiles is empty, call findAllFiles() to rescan the directory, and try
 again.  If queuedFiles is still empty, sleep for a bit and try again.
 <p>
 When we have a file to send, open an input stream and call chunkFile() to
 split the file into segments and place them on the blocking queue.  If the
 blocking queue is full, chunkFiles() waits until it's empty to proceed, since
 we want reliable file transmission.  Iff the file was sent successfully, we
 add the last modification time (read at the time of transfer) to a map.
 findAllFiles uses this map to determine if a found file was already processed,
 or whether a found file has been modified and needs to be resent. 
 <p>
 Between file transmissions, we check if we've found a new reader.  If so, we
 assume it is truly new, and thus needs all of the previously sent files.  To
 do this, we clear queuedFiles and add to it everything in foundFiles.
<P>

<P>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.FileSegmenterFilenameFilter.html" title="class in com.rti.dds.example.file">FileSegmenter.FileSegmenterFilenameFilter</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This class provides a filter for filenames.</TD>
</TR>
</TABLE>
&nbsp;
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.io.File</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#baseDirectory">baseDirectory</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The base directory to use when looking for files to be sent.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.io.FilenameFilter</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#filenameFilter">filenameFilter</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The filter which will accept or reject files based on both the
 <code>includeFilters</code> and the <code>excludeFilters</code>
 arguments to the constructor.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.Set</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#foundFiles">foundFiles</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The set of all located files</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#foundReader">foundReader</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set when a new reader has joined.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.Map</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#lastModifiedTimes">lastModifiedTimes</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map storing modification times for files.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.util.logging.Logger</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#logger">logger</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Standard java.util logger</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#processingFiles">processingFiles</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A boolean indicating whether this object is current processing files or not.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../../com/rti/dds/example/file/BlockingQueue.html" title="class in com.rti.dds.example.file">BlockingQueue</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#queue">queue</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The queue to put file segments.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.List</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#queuedFiles">queuedFiles</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The set of previously processed files.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#shouldRun">shouldRun</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A boolean indicating whether this object should exit its <code>run</code>
 method or not.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_java.lang.Thread"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Fields inherited from class java.lang.Thread</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>MAX_PRIORITY, MIN_PRIORITY, NORM_PRIORITY</CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#FileSegmenter(java.io.File, com.rti.dds.example.file.BlockingQueue)">FileSegmenter</A></B>(java.io.File&nbsp;baseDirectory,
              <A HREF="../../../../../com/rti/dds/example/file/BlockingQueue.html" title="class in com.rti.dds.example.file">BlockingQueue</A>&nbsp;queue)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a <code>FileSegmenter</code>.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#chunkFile(java.io.File, java.io.InputStream, int)">chunkFile</A></B>(java.io.File&nbsp;file,
          java.io.InputStream&nbsp;inputStream,
          int&nbsp;totalSegmentCount)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method breaks up a file into piece parts for transmission over DDS.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#findAllFiles(java.io.File)">findAllFiles</A></B>(java.io.File&nbsp;dir)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Find all files (filtered by the current filter) in the given directory
 (recursively if that option is chosen).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#foundNewReader()">foundNewReader</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called by Listener threads to indicate that we have a new reader</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.io.File</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#getFileToSend()">getFileToSend</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method will get the next entry from <code>queuedFiles</code>,
 determined by <code>qidx</code>  If we're already at the end of the list,
 research for files and try again.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#isProcessingFiles()">isProcessingFiles</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get whether or not this object is processing files.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#run()">run</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The logic to process files.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#setProcessingFiles(boolean)">setProcessingFiles</A></B>(boolean&nbsp;processingFiles)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set whether or not this object should be processing files.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.html#setShouldRun(boolean)">setShouldRun</A></B>(boolean&nbsp;shouldRun)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines whether this object should exit its <code>run</code> method
 or not.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Thread"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Thread</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>activeCount, checkAccess, countStackFrames, currentThread, destroy, dumpStack, enumerate, getContextClassLoader, getName, getPriority, getThreadGroup, holdsLock, interrupt, interrupted, isAlive, isDaemon, isInterrupted, join, join, join, resume, setContextClassLoader, setDaemon, setName, setPriority, sleep, sleep, start, stop, stop, suspend, toString, yield</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="logger"><!-- --></A><H3>
logger</H3>
<PRE>
private static final java.util.logging.Logger <B>logger</B></PRE>
<DL>
<DD>Standard java.util logger
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="baseDirectory"><!-- --></A><H3>
baseDirectory</H3>
<PRE>
private final java.io.File <B>baseDirectory</B></PRE>
<DL>
<DD>The base directory to use when looking for files to be sent.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="queue"><!-- --></A><H3>
queue</H3>
<PRE>
private final <A HREF="../../../../../com/rti/dds/example/file/BlockingQueue.html" title="class in com.rti.dds.example.file">BlockingQueue</A> <B>queue</B></PRE>
<DL>
<DD>The queue to put file segments.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="foundFiles"><!-- --></A><H3>
foundFiles</H3>
<PRE>
private final java.util.Set <B>foundFiles</B></PRE>
<DL>
<DD>The set of all located files
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="queuedFiles"><!-- --></A><H3>
queuedFiles</H3>
<PRE>
private final java.util.List <B>queuedFiles</B></PRE>
<DL>
<DD>The set of previously processed files.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="lastModifiedTimes"><!-- --></A><H3>
lastModifiedTimes</H3>
<PRE>
private final java.util.Map <B>lastModifiedTimes</B></PRE>
<DL>
<DD>Map storing modification times for files.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="filenameFilter"><!-- --></A><H3>
filenameFilter</H3>
<PRE>
private final java.io.FilenameFilter <B>filenameFilter</B></PRE>
<DL>
<DD>The filter which will accept or reject files based on both the
 <code>includeFilters</code> and the <code>excludeFilters</code>
 arguments to the constructor.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="processingFiles"><!-- --></A><H3>
processingFiles</H3>
<PRE>
private boolean <B>processingFiles</B></PRE>
<DL>
<DD>A boolean indicating whether this object is current processing files or not.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="shouldRun"><!-- --></A><H3>
shouldRun</H3>
<PRE>
private boolean <B>shouldRun</B></PRE>
<DL>
<DD>A boolean indicating whether this object should exit its <code>run</code>
 method or not.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="foundReader"><!-- --></A><H3>
foundReader</H3>
<PRE>
private boolean <B>foundReader</B></PRE>
<DL>
<DD>Set when a new reader has joined.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="FileSegmenter(java.io.File, com.rti.dds.example.file.BlockingQueue)"><!-- --></A><H3>
FileSegmenter</H3>
<PRE>
public <B>FileSegmenter</B>(java.io.File&nbsp;baseDirectory,
                     <A HREF="../../../../../com/rti/dds/example/file/BlockingQueue.html" title="class in com.rti.dds.example.file">BlockingQueue</A>&nbsp;queue)</PRE>
<DL>
<DD>Constructs a <code>FileSegmenter</code>.
<P>
<DT><B>Parameters:</B><DD><CODE>baseDirectory</CODE> - The base directory to look for files to send.<DD><CODE>queue</CODE> - The queue to put generated <code>FileSegment</code> messages.</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="run()"><!-- --></A><H3>
run</H3>
<PRE>
public void <B>run</B>()</PRE>
<DL>
<DD>The logic to process files. This includes finding the files to be sent,
 packaging the files into piece parts for transmission, and keeping track
 of what has been sent (for possible resending depending on options).
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="foundNewReader()"><!-- --></A><H3>
foundNewReader</H3>
<PRE>
public void <B>foundNewReader</B>()</PRE>
<DL>
<DD>Called by Listener threads to indicate that we have a new reader
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="chunkFile(java.io.File, java.io.InputStream, int)"><!-- --></A><H3>
chunkFile</H3>
<PRE>
private void <B>chunkFile</B>(java.io.File&nbsp;file,
                       java.io.InputStream&nbsp;inputStream,
                       int&nbsp;totalSegmentCount)
                throws java.io.IOException</PRE>
<DL>
<DD>This method breaks up a file into piece parts for transmission over DDS.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>file</CODE> - The file to be read and sent.<DD><CODE>inputStream</CODE> - The stream from which the file is read.<DD><CODE>totalSegmentCount</CODE> - The total number piece parts.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - If there are any problems reading the file.</DL>
</DD>
</DL>
<HR>

<A NAME="getFileToSend()"><!-- --></A><H3>
getFileToSend</H3>
<PRE>
protected java.io.File <B>getFileToSend</B>()</PRE>
<DL>
<DD>This method will get the next entry from <code>queuedFiles</code>,
 determined by <code>qidx</code>  If we're already at the end of the list,
 research for files and try again.  If no files are found then 
 <code>null</code> is returned.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>The next file to send, or null if none were found.</DL>
</DD>
</DL>
<HR>

<A NAME="findAllFiles(java.io.File)"><!-- --></A><H3>
findAllFiles</H3>
<PRE>
protected void <B>findAllFiles</B>(java.io.File&nbsp;dir)</PRE>
<DL>
<DD>Find all files (filtered by the current filter) in the given directory
 (recursively if that option is chosen). The files that are found are
 compared with those that have been sent (possibly accounting for the
 last time the file was modified if that option is chosen).  Files are
 added to <code>foundFiles</code> and again to<code>queuedFiles</code>
 if needed.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>dir</CODE> - The directory to look for files.</DL>
</DD>
</DL>
<HR>

<A NAME="setShouldRun(boolean)"><!-- --></A><H3>
setShouldRun</H3>
<PRE>
public void <B>setShouldRun</B>(boolean&nbsp;shouldRun)</PRE>
<DL>
<DD>Determines whether this object should exit its <code>run</code> method
 or not. Once this method is called with a value of <code>false</code>
 and the <code>run</code> method is exited it cannot be re-entered. So
 once exited, a new instance of the object should be created and run.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>shouldRun</CODE> - desired run status</DL>
</DD>
</DL>
<HR>

<A NAME="isProcessingFiles()"><!-- --></A><H3>
isProcessingFiles</H3>
<PRE>
public boolean <B>isProcessingFiles</B>()</PRE>
<DL>
<DD>Get whether or not this object is processing files.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>Returns whether or not this object is processing files.</DL>
</DD>
</DL>
<HR>

<A NAME="setProcessingFiles(boolean)"><!-- --></A><H3>
setProcessingFiles</H3>
<PRE>
public void <B>setProcessingFiles</B>(boolean&nbsp;processingFiles)</PRE>
<DL>
<DD>Set whether or not this object should be processing files.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>processingFiles</CODE> - true to process files, false otherwise.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/FileSegmenter.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../com/rti/dds/example/file/FileReconstructor.html" title="class in com.rti.dds.example.file"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../com/rti/dds/example/file/FileSegmenter.FileSegmenterFilenameFilter.html" title="class in com.rti.dds.example.file"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="FileSegmenter.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
